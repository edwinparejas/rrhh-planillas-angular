<div class="dialog-content-wrapper">
    <mat-toolbar matDialogTitle class="mat-accent m-0">
        <mat-toolbar-row fxLayout="row" fxLayoutAlign="space-between center">
            <div fxLayout="row" fxLayoutAlign="start center">
                <span class="title dialog-title">{{modal.title}}</span>
            </div>
            <button mat-icon-button (click)="matDialogRef.close()" aria-label="Close dialog">
                <mat-icon>close</mat-icon>
            </button>
        </mat-toolbar-row>
    </mat-toolbar>
    <div mat-dialog-content class="p-10 pb-0 m-0">
        <form autocomplete="off" [formGroup]="form">
            <fieldset class="fieldset-border">
                <legend>Datos personales</legend>
                <div fxLayout="column" fxFlexAlign="flex-start">
                    <div fxLayout="row" fxLayout.lt-md="column" fxFlex="100%" fxLayoutGap="12px" fxLayoutGap.lt-md="0">
                        <div fxLayout="row" fxLayout.lt-sm="column" fxFlex="100%" fxLayoutGap="12px">
                            <div fxLayoutAlign="start start" fxFlex="33.3%" fxFlex.xs="100%">
                                <mat-form-field appearance="fill" fxFlex="100%" [mineduFormFieldValidationState]="form.get('idTipoDocumentoIdentidad')">
                                    <mat-label [mineduFormRequiredLabel]="form.get('idTipoDocumentoIdentidad')">
                                        Tipo de documento
                                    </mat-label>
                                    <mat-select (selectionChange)="handleCambiarValor($event.value)" formControlName="idTipoDocumentoIdentidad">
                                        <mat-option *ngFor="let item of combo.tiposDocumentoIdentidad" [value]="item.codigo">
                                            {{ item.descripcion }}
                                        </mat-option>
                                    </mat-select>
                                    <mat-error>
                                        <minedu-form-field-validation-messages
                                            [mineduFormControl]="form.get('idTipoDocumentoIdentidad')">
                                        </minedu-form-field-validation-messages>
                                    </mat-error>
                                </mat-form-field>
                            </div>
                            <div fxLayoutAlign="start start" fxFlex="33.3%" fxFlex.xs="100%">
                                <mat-form-field appearance="fill" fxFlex="100%" [mineduFormFieldValidationState]="form.get('numeroDocumentoIdentidad')">
                                    <mat-label [mineduFormRequiredLabel]="form.get('numeroDocumentoIdentidad')">
                                        Número de documento
                                    </mat-label>
                                    <input matInput formControlName="numeroDocumentoIdentidad" (keyup.enter)="handleBuscarPostulante()"
                                    (keypress)="maxLengthnumeroDocumentoIdentidad == 8 ? validaNumericos($event):true"
                                    [maxlength]="maxLengthnumeroDocumentoIdentidad">
                                    <mat-error>
                                        <minedu-form-field-validation-messages
                                            [mineduFormControl]="form.get('numeroDocumentoIdentidad')">
                                        </minedu-form-field-validation-messages>
                                    </mat-error>
                                </mat-form-field>
                            </div>
                            <div fxLayoutAlign="start start" fxFlex="33.3%" fxFlex.xs="100%">
                                <button mat-raised-button color="primary" class="ml-4" (click)="handleBuscarPostulante()">
                                    <span class="material-icons">search</span>Buscar
                                </button>
                            </div>
                        </div>
                    </div>
                    <div fxLayout="row" fxLayout.lt-md="column" fxFlex="100%" fxLayoutGap="12px" fxLayoutGap.lt-md="0" *ngIf="postulante.numeroDocumentoIdentidadCompleto != null">
                        <div fxFlex="25%" fxFlex.xs="100%">
                            <div class="form-group">
                                <label class="label" for="">Documento: </label>
                                <p class="form-control-static" *ngIf="postulante.numeroDocumentoIdentidadCompleto">
                                    {{ postulante.numeroDocumentoIdentidadCompleto }}
                                </p>
                            </div>
                        </div>
                        <div fxFlex="25%" fxFlex.xs="100%">
                            <div class="form-group">
                                <label class="label" for="">Primer Apellido: </label>
                                <p class="form-control-static" *ngIf="postulante.primerApellido">
                                    {{ postulante.primerApellido }}
                                </p>
                            </div>
                        </div>
                        <div fxFlex="25%" fxFlex.xs="100%">
                            <div class="form-group">
                                <label class="label" for="">Segundo Apellido: </label>
                                <p class="form-control-static" *ngIf="postulante.segundoApellido">
                                    {{ postulante.segundoApellido }}</p>
                            </div>
                        </div>
                        <div fxFlex="25%" fxFlex.xs="100%">
                            <div class="form-group">
                                <label class="label" for="">Nombres: </label>
                                <p class="form-control-static" *ngIf="postulante.nombres">
                                    {{ postulante.nombres }}</p>
                            </div>
                        </div>
                    </div>
                    <div fxLayout="row" fxLayout.lt-md="column" fxFlex="100%" fxLayoutGap="12px" fxLayoutGap.lt-md="0" *ngIf="postulante.numeroDocumentoIdentidadCompleto != null">
                        <div fxFlex="25%" fxFlex.xs="100%">
                            <div class="form-group">
                                <label class="label" for="">Sexo: </label>
                                <p class="form-control-static" *ngIf="postulante.descripcionGenero">
                                    {{ postulante.descripcionGenero }}
                                </p>
                            </div>
                        </div>
                        <div fxFlex="25%" fxFlex.xs="100%">
                            <div class="form-group">
                                <label class="label" for="">Fecha de nacimiento: </label>
                                <p class="form-control-static" *ngIf="postulante.fechaNacimiento">
                                    {{ postulante.fechaNacimiento }}</p>
                            </div>
                        </div>                        
                        <div fxFlex="25%" fxFlex.xs="100%">
                            <div class="form-group">
                                <label class="label" for="">Edad: </label>
                                <p class="form-control-static" *ngIf="postulante.edad">
                                    {{ postulante.edad }}
                                </p>
                            </div>
                        </div>
                        <div fxFlex="25%" fxFlex.xs="100%">
                            <div class="form-group">
                                <label class="label" for="">Nacionalidad: </label>
                                <p class="form-control-static" *ngIf="postulante.descripcionNacionalidad">
                                    {{ postulante.descripcionNacionalidad }}
                                </p>
                            </div>
                        </div>
                    </div>
                    <div fxLayout="row" fxLayout.lt-md="column" fxFlex="100%" fxLayoutGap="12px" *ngIf="tipoDocumento == documento.CARNET_EXTRANJERIA || tipoDocumento == documento.PASAPORTE">
                        <div fxLayout.lt-sm="column" fxFlex="24%" fxFlex.xs="100%">
                            <mat-form-field appearance="fill" fxFlex="100%" [mineduFormFieldValidationState]="form.get('nacionalidad')">
                                <mat-label [mineduFormRequiredLabel]="form.get('nacionalidad')">Nacionalidad *</mat-label>
                                <mat-select (selectionChange)="handleCambiarValorNacionalidad($event.value)" formControlName="nacionalidad">
                                    <mat-option *ngFor="let item of combo.nacionalidades" [value]="item.id">
                                        {{ item.descripcion }}
                                    </mat-option>
                                </mat-select>
                                <mat-error>
                                    <minedu-form-field-validation-messages
                                        [mineduFormControl]="form.get('nacionalidad')">
                                    </minedu-form-field-validation-messages>
                                </mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                </div>
            </fieldset><br>
            <mat-checkbox
		class="label-normal"
		formControlName="cumpleNormaTecnica"  
		required>Según norma técnica vigente, se ha verificado que la persona no cuenta con impedimento para ser postulante (*)
            </mat-checkbox>
            <mat-tab-group>
                <mat-tab label="1. Expediente">
                    <fieldset class="fieldset-border">
                        <legend>Datos del Expediente</legend>
                        <div fxLayout="column" fxFlexAlign="flex-start">
                            <div fxLayout="row" fxLayout.lt-md="column" fxFlex="100%" fxLayoutGap="12px" fxLayoutGap.lt-md="0">
                                <div fxLayout="row" fxLayout.lt-sm="column" fxFlex="100%" fxLayoutGap="12px">
                                    <div fxLayoutAlign="start start" fxFlex="33.3%" fxFlex.xs="100%">
                                        <mat-form-field appearance="fill" fxFlex="100%" [mineduFormFieldValidationState]="form.get('numeroExpediente')">
                                            <mat-label [mineduFormRequiredLabel]="form.get('numeroExpediente')">
                                                Número de Expediente
                                            </mat-label>
                                            <input matInput formControlName="numeroExpediente" uppercase>
                                            <mat-error>
                                                <minedu-form-field-validation-messages
                                                    [mineduFormControl]="form.get('numeroExpediente')">
                                                </minedu-form-field-validation-messages>
                                            </mat-error>
                                        </mat-form-field>
                                    </div>
                                    <div fxLayoutAlign="start start" fxFlex="33.3%" fxFlex.xs="100%">
                                        <minedu-datepicker label="Fecha del Expediente" [mineduFormControl]="form.get('fechaExpediente')"
                                            [formControl]="form.get('fechaExpediente')" [max]="nowDate">
                                        </minedu-datepicker>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </fieldset>
                </mat-tab>
                <mat-tab label="2. Plaza a Postular">
                    <fieldset class="fieldset-border">
                        <legend>Orden de prelación</legend>
                        <div fxLayout="column" fxFlexAlign="flex-start">
                            <div fxLayout="row" fxLayout.lt-md="column" fxFlex="100%" fxLayoutGap="12px" fxLayoutGap.lt-md="0">
                                <div fxLayout="row" fxLayout.lt-sm="column" fxFlex="100%" fxLayoutGap="12px">
                                    <div fxLayoutAlign="start start" fxFlex="25%" fxFlex.xs="100%">
                                        <mat-form-field appearance="fill" fxFlex="100%" fxFlex.xs="100%" [mineduFormFieldValidationState]="form.get('idModalidadEducativa')">
                                            <mat-label [mineduFormRequiredLabel]="form.get('idModalidadEducativa')">Modalidad Educativa
                                            </mat-label>
                                            <mat-select formControlName="idModalidadEducativa">
                                                <mat-option *ngFor="let item of combo.modalidadEducativa" [value]="item.idModalidadEducativa">
                                                    {{item.descripcionModalidadEducativa}}
                                                </mat-option>
                                            </mat-select>
                                            <mat-error>
                                                <minedu-form-field-validation-messages [mineduFormControl]="form.get('idModalidadEducativa')">
                                                </minedu-form-field-validation-messages>
                                            </mat-error>
                                        </mat-form-field>
                                    </div>
                                    <div fxLayoutAlign="start start" fxFlex="25%" fxFlex.xs="100%">
                                        <mat-form-field appearance="fill" fxFlex="100%" fxFlex.xs="100%" [mineduFormFieldValidationState]="form.get('idNivelEducativo')">
                                            <mat-label [mineduFormRequiredLabel]="form.get('idNivelEducativo')">Nivel Educativo
                                            </mat-label>
                                            <mat-select formControlName="idNivelEducativo">
                                                <mat-option *ngFor="let item of combo.nivelEducativa" [value]="item.idNivelEducativo">
                                                    {{item.descripcionNivelEducativo}}
                                                </mat-option>
                                            </mat-select>
                                            <mat-error>
                                                <minedu-form-field-validation-messages [mineduFormControl]="form.get('idNivelEducativo')">
                                                </minedu-form-field-validation-messages>
                                            </mat-error>
                                        </mat-form-field>
                                    </div>
                                    <div fxLayoutAlign="start start" fxFlex="25%" fxFlex.xs="100%">
                                        <mat-form-field appearance="fill" fxFlex="100%" fxFlex.xs="100%" [mineduFormFieldValidationState]="form.get('idAreaCurricular')">
                                            <mat-label [mineduFormRequiredLabel]="form.get('idAreaCurricular')">Área Curricular
                                            </mat-label>
                                            <mat-select formControlName="idAreaCurricular">
                                                <mat-option *ngFor="let item of combo.areaCurricular" [value]="item.idAreaCurricular">
                                                    {{item.descripcionAreaCurricular}}
                                                </mat-option>
                                            </mat-select>
                                            <mat-error>
                                                <minedu-form-field-validation-messages [mineduFormControl]="form.get('idAreaCurricular')">
                                                </minedu-form-field-validation-messages>
                                            </mat-error>
                                        </mat-form-field>
                                    </div>
                                    <div fxLayoutAlign="start start" fxFlex="25%" fxFlex.xs="100%">
                                        <mat-form-field appearance="fill" fxFlex="100%" fxFlex.xs="100%" [mineduFormFieldValidationState]="form.get('idEspecialidad')">
                                            <mat-label [mineduFormRequiredLabel]="form.get('idEspecialidad')">Especialidad
                                            </mat-label>
                                            <mat-select formControlName="idEspecialidad">
                                                <mat-option *ngFor="let item of combo.especialidad" [value]="item.idEspecialidad">
                                                    {{item.descripcionEspecialidad}}
                                                </mat-option>
                                            </mat-select>
                                            <mat-error>
                                                <minedu-form-field-validation-messages [mineduFormControl]="form.get('idEspecialidad')">
                                                </minedu-form-field-validation-messages>
                                            </mat-error>
                                        </mat-form-field>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </fieldset>
                    <fieldset class="fieldset-border">
                        <legend>Título</legend>
                        <div fxLayout="column" fxFlexAlign="flex-start">
                            <div fxLayout="row" fxLayout.lt-md="column" fxFlex="100%" fxLayoutGap="12px" fxLayoutGap.lt-md="0">
                                <div fxLayout="row" fxLayout.lt-sm="column" fxFlex="100%" fxLayoutGap="12px">
                                    <div fxLayoutAlign="start start" fxFlex="25%" fxFlex.xs="100%">
                                        <mat-form-field appearance="fill" fxFlex="100%" [mineduFormFieldValidationState]="form.get('numeroExpedienteTitulo')">
                                            <mat-label [mineduFormRequiredLabel]="form.get('numeroExpedienteTitulo')">
                                                Número de Expediente
                                            </mat-label>
                                            <input matInput formControlName="numeroExpedienteTitulo" uppercase>
                                            <mat-error>
                                                <minedu-form-field-validation-messages
                                                    [mineduFormControl]="form.get('numeroExpedienteTitulo')">
                                                </minedu-form-field-validation-messages>
                                            </mat-error>
                                        </mat-form-field>
                                    </div>
                                    <div fxLayoutAlign="start start" fxFlex="25%" fxFlex.xs="100%">
                                        <minedu-datepicker label="Fecha del Expediente del título" [mineduFormControl]="form.get('fechaExpedienteTitulo')"
                                            [formControl]="form.get('fechaExpedienteTitulo')" [max]="nowDate">
                                        </minedu-datepicker>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </fieldset>
                </mat-tab>
                <mat-tab label="3. Vinculación Vigente" *ngIf="tieneVinculacion">
                    <fieldset class="fieldset-border">
                        <legend>Vinculación Vigente</legend>
                        <div fxLayout="column" fxFlexAlign="flex-start">
                            <div class="content">
                                <div class="content-table">
                                    <div fxLayout="row" fxLayout.lt-md="column">
                                        <mat-table class="minedu-table" #table [dataSource]="dataSourcePlazasVinculadas" [class.isMobile]="isMobile"
                                            [@animateStagger]="{ value: '50' }" style="width: 100%" mineduPerfectScrollbar>
                                            <ng-container matColumnDef="registro">
                                                <mat-header-cell *matHeaderCellDef>Nro</mat-header-cell>
                                                <mat-cell *matCellDef="let row; let i = index;">
                                                    <p>{{ i + 1 }}</p>
                                                </mat-cell>
                                            </ng-container>
                                            <ng-container matColumnDef="instancia">
                                                <mat-header-cell *matHeaderCellDef>Instancia</mat-header-cell>
                                                <mat-cell *matCellDef="let row; let i = index">
                                                    {{ row.instancia }}
                                                </mat-cell>
                                            </ng-container>
                                            <ng-container matColumnDef="subInstancia">
                                                <mat-header-cell *matHeaderCellDef>Sub Instancia</mat-header-cell>
                                                <mat-cell *matCellDef="let row; let i = index">
                                                    {{ row.subInstancia }}
                                                </mat-cell>
                                            </ng-container>
                                            <ng-container matColumnDef="centroTrabajo">
                                                <mat-header-cell *matHeaderCellDef>Centro de Trabajo</mat-header-cell>
                                                <mat-cell *matCellDef="let row; let i = index">
                                                    {{ row.institucionEducativa }}
                                                </mat-cell>
                                            </ng-container>
                                            <ng-container matColumnDef="modalidad">
                                                <mat-header-cell *matHeaderCellDef>Modalidad</mat-header-cell>
                                                <mat-cell *matCellDef="let row; let i = index">
                                                    {{ row.modalidad }}
                                                </mat-cell>
                                            </ng-container>
                                            <ng-container matColumnDef="nivelEducativo">
                                                <mat-header-cell *matHeaderCellDef>Nivel Educativo</mat-header-cell>
                                                <mat-cell *matCellDef="let row; let i = index">
                                                    {{ row.nivelEducativo }}
                                                </mat-cell>
                                            </ng-container>
                                            <ng-container matColumnDef="codigoPlaza">
                                                <mat-header-cell *matHeaderCellDef>Codigo de Plaza</mat-header-cell>
                                                <mat-cell *matCellDef="let row; let i = index">
                                                    {{ row.codigoPlaza }}
                                                </mat-cell>
                                            </ng-container>
                                            <ng-container matColumnDef="tipoPlaza">
                                                <mat-header-cell *matHeaderCellDef>Tipo de Plaza</mat-header-cell>
                                                <mat-cell *matCellDef="let row; let i = index">
                                                    {{ row.tipoPlaza }}
                                                </mat-cell>
                                            </ng-container>
                                            <ng-container matColumnDef="regimenLaboral">
                                                <mat-header-cell *matHeaderCellDef>Regimen Laboral</mat-header-cell>
                                                <mat-cell *matCellDef="let row; let i = index">
                                                    {{ row.regimenLaboral }}
                                                </mat-cell>
                                            </ng-container>
                                            <ng-container matColumnDef="condicionLaboral">
                                                <mat-header-cell *matHeaderCellDef>Condición Laboral</mat-header-cell>
                                                <mat-cell *matCellDef="let row; let i = index">
                                                    {{ row.condicionLaboral }}
                                                </mat-cell>
                                            </ng-container>
                                            <ng-container matColumnDef="cargo">
                                                <mat-header-cell *matHeaderCellDef>Cargo</mat-header-cell>
                                                <mat-cell *matCellDef="let row; let i = index">
                                                    {{ row.cargo }}
                                                </mat-cell>
                                            </ng-container>
                                            <ng-container matColumnDef="areaCurricular">
                                                <mat-header-cell *matHeaderCellDef>Área Curricular</mat-header-cell>
                                                <mat-cell *matCellDef="let row; let i = index">
                                                    {{ row.areaCurricular}}
                                                </mat-cell>
                                            </ng-container>
                                            <ng-container matColumnDef="jornadaLaboral">
                                                <mat-header-cell *matHeaderCellDef>Jornada Laboral</mat-header-cell>
                                                <mat-cell *matCellDef="let row; let i = index">
                                                    {{ row.jornadaLaboral}}
                                                </mat-cell>
                                            </ng-container>
                                            <ng-container matColumnDef="fechaInicio">
                                                <mat-header-cell *matHeaderCellDef>Fecha Inicio</mat-header-cell>
                                                <mat-cell *matCellDef="let row; let i = index">
                                                    {{ row.vigenciaInicio}}
                                                </mat-cell>
                                            </ng-container>
                                            <ng-container matColumnDef="fechaFin">
                                                <mat-header-cell *matHeaderCellDef>Fecha Fin</mat-header-cell>
                                                <mat-cell *matCellDef="let row; let i = index">
                                                    {{ row.vigenciaFin}}
                                                </mat-cell>
                                            </ng-container>
                                            <mat-header-row *matHeaderRowDef="displayedColumnsPlazas; sticky: true"></mat-header-row>
                                            <mat-row *matRowDef="let row; columns: displayedColumnsPlazas" (mouseover)="row.hovered = true"
                                                (mouseout)="row.hovered = false" matRipple [@animate]="{ value: '*', params: { y: '100%' } }">
                                            </mat-row>
                                        </mat-table>
                                    </div><br>
                                    <div class="no-results" [style.display]="dataSourcePlazasVinculadas.length === 0 ? '' : 'none'">
                                        No se encontraron registros
                                    </div>
                                </div>
                            </div>
                        </div>
                    </fieldset>
                </mat-tab> 
            </mat-tab-group>
        </form>
        <p class="text-danger">(*) Datos obligatorios</p>
    </div>
    <div mat-dialog-actions class="panel-footer m-0" fxLayout="row" fxLayoutAlign="end center">
        <button mat-stroked-button (click)="handleGuardarNuevoPostulante()" color="primary" class="ml-4" [@animate]="{value:'*', params:{delay:'300ms',scale:'.2'}}">
            <span class="material-icons">save</span>Guardar
        </button>
        <minedu-button-cancel (mineduOnCancel)="handleCancelar()"></minedu-button-cancel>
    </div>
</div>
