<div class="panel-body">
    <div class="panel-libre">
        <div fxLayout="row" fxLayout.lt-md="column" fxFlex="100%" fxLayoutGap="12px" fxLayoutGap.lt-md="0">
            <div fxLayout="row" fxLayout.xs="column" fxFlex="100%" fxFlex.xs="100%" fxLayoutGap="12px"
                fxLayoutGap.xs="0">
                <div fxLayoutAlign="start center" fxFlex="50%" fxFlex.xs="100%">
                    <div style="font-weight: bold;">
                        <span class="label">Fecha de Corte:</span>
                        <br>
                        <span class="label-normal">{{objetoBus?.fecha_corte | date:'dd/MM/yyyy'}}</span>
                    </div>
                </div>
                <div fxLayoutAlign="end center" fxFlex="50%" fxFlex.xs="100%">
                    <ng-container *ngIf="objetoBus.valiPlaza === 'PENDIENTE'">
                        <button mat-stroked-button color="primary" 
                        (click)="handleReasignarPlaza()" class="ml-4">
                            <span class="material-icons">visibility</span>
                            Reasignar Plazas
                        </button>
                    </ng-container>
                    <button mat-stroked-button color="primary" 
                    (click)="handleExportar()" class="ml-4">
                        <span class="material-icons">get_app</span>
                        EXPORTAR
                    </button>

                </div>
            </div>
        </div>
    </div>

    <div class="content" mineduPerfectScrollbar>
        <div class="content-table">
            <div fxLayout="row" fxLayout.lt-md="column">
                <mat-table class="minedu-table" #table [dataSource]="dataSource" [class.isMobile]="isMobile"
                    [@animateStagger]="{value:'50'}" style="width: 100%" mineduPerfectScrollbar>

                    <ng-container matColumnDef="select">
                        <mat-header-cell *matHeaderCellDef>
                            <mat-checkbox (change)="$event ? masterToggle() : null"
                                [checked]="selectionObservadas.hasValue() && isAllSelected()"
                                [indeterminate]="selectionObservadas.hasValue() && !isAllSelected()"
                                [aria-label]="checkboxLabel()">
                            </mat-checkbox>
                        </mat-header-cell>
                        <mat-cell *matCellDef="let row; let i = index;">
                            <mat-checkbox (click)="$event.stopPropagation()"
                                (change)="$event ? selectionObservadas.toggle(row) : null" 
                                [checked]="selectionObservadas.isSelected(row)"
                                [aria-label]="checkboxLabel(row)">
                            </mat-checkbox>
                        </mat-cell>
                    </ng-container>


                    <ng-container matColumnDef="instancia">
                        <mat-header-cell *matHeaderCellDef>Instancia
                        </mat-header-cell>
                        <mat-cell *matCellDef="let row; let i = index;">
                            <span class="mobile-label">Instancia:</span>
                            {{row.instancia}}
                        </mat-cell>
                    </ng-container>

                    <ng-container matColumnDef="subinstancia">
                        <mat-header-cell *matHeaderCellDef>Sub Instancia
                        </mat-header-cell>
                        <mat-cell *matCellDef="let row; let i = index;">
                            <span class="mobile-label">Sub Instancia:</span>
                            {{row.subinstancia}}
                        </mat-cell>
                    </ng-container>

                    <ng-container matColumnDef="codigo_modular">
                        <mat-header-cell *matHeaderCellDef>Codigo Modular
                        </mat-header-cell>
                        <mat-cell *matCellDef="let row; let i = index;">
                            <span class="mobile-label">Codigo Modular:</span>
                            {{row.codigo_modular}}
                        </mat-cell>
                    </ng-container>

                    <ng-container matColumnDef="centro_trabajo">
                        <mat-header-cell *matHeaderCellDef>Centro de Trabajo
                        </mat-header-cell>
                        <mat-cell *matCellDef="let row; let i = index;">
                            <span class="mobile-label">Centro de Trabajo:</span>
                            {{row.centro_trabajo}}
                        </mat-cell>
                    </ng-container>

                    <ng-container matColumnDef="modalidad">
                        <mat-header-cell *matHeaderCellDef>Modalidad
                        </mat-header-cell>
                        <mat-cell *matCellDef="let row; let i = index;">
                            <span class="mobile-label">Modalidad:</span>
                            {{row.modalidad}}
                        </mat-cell>
                    </ng-container>

                    <ng-container matColumnDef="nivel_educativa">
                        <mat-header-cell *matHeaderCellDef>Nivel Educativa
                        </mat-header-cell>
                        <mat-cell *matCellDef="let row; let i = index;">
                            <span class="mobile-label">Nivel Educativa:</span>
                            {{row.nivel_educativa}}
                        </mat-cell>
                    </ng-container>

                    <ng-container matColumnDef="tipo_gestion">
                        <mat-header-cell *matHeaderCellDef>Tipo de Gestion
                        </mat-header-cell>
                        <mat-cell *matCellDef="let row; let i = index;">
                            <span class="mobile-label">Tipo de Gestion:</span>
                            {{row.tipo_gestion}}
                        </mat-cell>
                    </ng-container>

                    <ng-container matColumnDef="codigo_plaza">
                        <mat-header-cell *matHeaderCellDef>Codigo Plaza
                        </mat-header-cell>
                        <mat-cell *matCellDef="let row; let i = index;">
                            <span class="mobile-label">Codigo Plaza:</span>
                            {{row.codigo_plaza}}
                        </mat-cell>
                    </ng-container>

                    <ng-container matColumnDef="cargo">
                        <mat-header-cell *matHeaderCellDef>Cargo
                        </mat-header-cell>
                        <mat-cell *matCellDef="let row; let i = index;">
                            <span class="mobile-label">Cargo:</span>
                            {{row.cargo}}
                        </mat-cell>
                    </ng-container>

                    <ng-container matColumnDef="area_curricular">
                        <mat-header-cell *matHeaderCellDef>Area Curricular
                        </mat-header-cell>
                        <mat-cell *matCellDef="let row; let i = index;">
                            <span class="mobile-label">Area Curricular:</span>
                            {{row.area_curricular}}
                        </mat-cell>
                    </ng-container>

                    <ng-container matColumnDef="tipo_plaza">
                        <mat-header-cell *matHeaderCellDef>Tipo Plaza
                        </mat-header-cell>
                        <mat-cell *matCellDef="let row; let i = index;">
                            <span class="mobile-label">Tipo Plaza:</span>
                            {{row.tipo_plaza}}
                        </mat-cell>
                    </ng-container>

                    <ng-container matColumnDef="vigencia_inicio">
                        <mat-header-cell *matHeaderCellDef>Vigencia Inicio
                        </mat-header-cell>
                        <mat-cell *matCellDef="let row; let i = index;">
                            <span class="mobile-label">Vigencia Inicio:</span>
                            {{row.vigencia_inicio | date: 'dd/MM/yyyy' }}
                        </mat-cell>
                    </ng-container>

                    <ng-container matColumnDef="vigencia_fin">
                        <mat-header-cell *matHeaderCellDef>Vigencia Fin
                        </mat-header-cell>
                        <mat-cell *matCellDef="let row; let i = index;">
                            <span class="mobile-label">Vigencia Fin:</span>
                            {{row.vigencia_fin | date: 'dd/MM/yyyy' }}
                        </mat-cell>
                    </ng-container>

                    <ng-container matColumnDef="acciones" class="extra">
                        <mat-header-cell *matHeaderCellDef>ACCIONES</mat-header-cell>
                        <mat-cell *matCellDef="let row; let  i = index;">
                            <span class="mobile-label">ACCIONES:</span>
                            <div fxLayout="row" fxLayoutAlign="space-between center">
                                <div class="mat-icon-table">
                                    <button mat-stroked-button color="primary"
                                    class="sidebar-toggle btn-sm ml-2"
                                        aria-label="Informacion"
                                        matTooltip="Informacion"
                                        (click)="dialogInformacion(row)">
                                        <mat-icon class="">error</mat-icon>
                                    </button>
                                </div>
                            </div>
                        </mat-cell>
                    </ng-container>


                    <mat-header-row *matHeaderRowDef="displayedColumns; sticky:true">
                    </mat-header-row>
                    <mat-row *matRowDef="let row; columns: displayedColumns;" (click)="selectionObservadas.toggle(row)"
                        [ngClass]="{hovered: row.hovered, selected: selectionObservadas.isSelected(row)}"
                        (mouseover)="row.hovered = true" (mouseout)="row.hovered = false" matRipple
                        [@animate]="{value:'*',params:{y:'100%'}}">
                    </mat-row>
                </mat-table>
            </div>
            <div class="no-results" *ngIf="!(dataSource.loading | async)"
                [style.display]="dataSource.data.length === 0 ? '' : 'none'">
                No se encontraron registros
            </div>
            <div fxLayout="column" fxLayoutAlign="center center" class="spinner-container"
                *ngIf="dataSource.loading | async">pageSize
                <mat-spinner diameter="50"></mat-spinner>
            </div>
            <mat-paginator fxLayoutAlign="center center" #paginator class="mat-paginator-sticky" [length]="dataSource.totalregistro"
                [pageIndex]="paginatorPageIndex" [pageSize]="paginatorPageSize"
                [pageSizeOptions]="[5, 10, 20, 30, 40, 50, 100]" showFirstLastButtons>
            </mat-paginator>
        </div>

    </div>

    <div>
        <div fxLayoutAlign="start center" fxFlex="50%" fxFlex.xs="100%">
            <div fxLayoutAlign="start center" fxFlex="50%" fxFlex.xs="100%">
                <label class="label">Total de Plazas Observadas:
                    <span class="label-normal">{{dataSource.totalregistro}}</span>
                </label>
            </div>
            <div fxLayoutAlign="start center" fxFlex="50%" fxFlex.xs="100%">
                <label class="label">Plazas Seleccionadas:
                    <span class="label-normal">{{selectionObservadas.selected.length}}</span>
                </label>
            </div>

        </div>
    </div>
</div>