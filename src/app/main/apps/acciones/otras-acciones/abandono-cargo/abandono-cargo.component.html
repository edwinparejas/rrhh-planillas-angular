<div class="page-layout carded fullwidth inner-scroll p-16" mineduPerfectScrollbar>
    <div class="page-layout carded left-sidebar inner-scroll">
        <div class="center">
            <div fxLayout="row" fxLayout.lt-md="column">
                <div fxLayout="row" fxLayout.xs="column" fxFlex="100%" fxFlex.xs="100%" fxLayoutGap="12px" fxLayoutGap.xs="0">
                    <div fxFlex="50%">
                        <h2>Gestionar Otras Acciones - Abandono de Cargo y Otros</h2>
                    </div>
                    <div fxFlex="50%">
                        <ol class="breadcrumb pull-right">
                            <li><a [routerLink]="['/ayni/personal/inicio']"><mat-icon color="accent" class="s-18">home</mat-icon> Inicio</a></li>
                            <li class="active">Abandono de Cargo y Otros</li>
                        </ol>
                    </div>
                </div>
            </div>
            
            <div fxLayout="row">
                <div class="page-layout carded fullwidth inner-scroll p-10">
                    <div class="page-layout carded left-sidebar inner-scroll">
                        <div class="center">
                            <div class="panel">
                                <div class="panel-heading">
                                    <h3 class="panel-title">Criterios de búsqueda</h3>
                                </div>
                                <div class="panel-body">
                                    <form autocomplete="off" novalidate [formGroup]="form">
                                        <div fxLayout="row" fxLayout.lt-md="column" fxLayoutGap="12px">
                                            <div fxFlex.gt-sm="25%">
                                                <minedu-datepicker mode="YEAR" label="Año"
                                                    [formControl]="form.get('anioDt')"
                                                    [mineduFormControl]="form.get('anioDt')"
                                                    [max]="now">
                                                </minedu-datepicker>
                                            </div>
                                            <div fxFlex.gt-sm="25%">
                                                <mat-form-field appearance="fill" fxFlex="100%">
                                                    <mat-label [mineduFormRequiredLabel]="form.get('idRegimenLaboral')">Régimen Laboral</mat-label>
                                                    <mat-select formControlName="idRegimenLaboral" (selectionChange)="selectRegimenLaboral($event)">
                                                        <mat-option *ngFor="let item of comboLists.listRegimenLaboral" [value]="item.idRegimenLaboral">
                                                            {{ item.descripcionRegimenLaboral }}
                                                        </mat-option>
                                                    </mat-select>
                                                    <mat-error>
                                                        <minedu-form-field-validation-messages [mineduFormControl]="form.get('idRegimenLaboral')">
                                                        </minedu-form-field-validation-messages>
                                                    </mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div fxFlex.gt-sm="25%">
                                                <mat-form-field appearance="fill" fxFlex="100%"
                                                    [mineduFormFieldValidationState]="form.get('idMotivoAccion')">
                                                    <mat-label [mineduFormRequiredLabel]="form.get('idMotivoAccion')">
                                                        Motivo Acción
                                                    </mat-label>
                                                    <mat-select formControlName="idMotivoAccion">
                                                        <mat-option *ngFor="let item of comboLists.listMotivoAccion"
                                                            [value]="item.idMotivoAccion">
                                                            {{item.descripcionMotivoAccion}}
                                                        </mat-option>
                                                    </mat-select>
                                                    <button mat-icon-button matSuffix *ngIf="form.get('idMotivoAccion').value > 0" (click)="clearFormField($event, 'idMotivoAccion')">
                                                        <mat-icon>close</mat-icon>
                                                    </button>
                                                    <mat-error>
                                                        <minedu-form-field-validation-messages
                                                            [mineduFormControl]="form.get('idMotivoAccion')">
                                                        </minedu-form-field-validation-messages>
                                                    </mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div fxFlex.gt-sm="25%">
                                                <mat-form-field appearance="fill" fxFlex="100%" [mineduFormFieldValidationState]="form.get('idEstado')">
                                                    <mat-label [mineduFormRequiredLabel]="form.get('idEstado')">Estado</mat-label>
                                                    <mat-select formControlName="idEstado" (selectionChange)="loadComboEstado()">
                                                        <mat-option *ngFor="let item of comboLists.listEstado" [value]="item.id_catalogo_item">
                                                            {{ item.descripcion_catalogo_item }}
                                                        </mat-option>
                                                    </mat-select>
                                                    <button mat-icon-button matSuffix *ngIf="form.get('idEstado').value > 0" (click)="clearFormField($event, 'idEstado')">
                                                        <mat-icon>close</mat-icon>
                                                    </button>
                                                    <mat-error>
                                                        <minedu-form-field-validation-messages [mineduFormControl]="form.get('idEstado')">
                                                        </minedu-form-field-validation-messages>
                                                    </mat-error>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <div fxLayout="row" fxLayout.lt-md="column" fxLayoutGap="12px">
                                            <div fxFlex.gt-sm="25%">
                                                <mat-form-field appearance="fill" fxFlex="100%">
                                                    <mat-label>
                                                        Mandato Judicial
                                                    </mat-label>
                                                    <mat-select formControlName="idMandatoJudicial">
                                                        <mat-option *ngFor="let item of comboLists.listMandatoJudicial" [value]="item.idMandatoJudicial">
                                                            {{item.descripcionMandatoJudicial}}
                                                        </mat-option>
                                                    </mat-select>
                                                    <button mat-icon-button matSuffix>
                                                        <mat-icon>close</mat-icon>
                                                    </button>
                                                    <mat-error>
                                                        <minedu-form-field-validation-messages
                                                        [mineduFormControl]="form.get('idMandatoJudicial')">
                                                        </minedu-form-field-validation-messages>
                                                    </mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div fxFlex.gt-sm="25%">
                                                <mat-form-field appearance="fill" fxFlex="100%"
                                                    [mineduFormFieldValidationState]="form.get('idTipoDocumento')">
                                                    <mat-label [mineduFormRequiredLabel]="form.get('idTipoDocumento')">
                                                        Tipo Documento
                                                    </mat-label>
                                                    <mat-select formControlName="idTipoDocumento">
                                                        <mat-option *ngFor="let item of comboLists.listTipoDocumento"
                                                            [value]="item.id_catalogo_item">
                                                            {{item.descripcion_catalogo_item | uppercase}}
                                                        </mat-option>
                                                    </mat-select>
                                                    <button mat-icon-button matSuffix *ngIf="form.get('idTipoDocumento').value > 0" (click)="clearFormField($event, 'idTipoDocumento')">
                                                        <mat-icon>close</mat-icon>
                                                    </button>
                                                    <mat-error>
                                                        <minedu-form-field-validation-messages
                                                            [mineduFormControl]="form.get('idTipoDocumento')">
                                                        </minedu-form-field-validation-messages>
                                                    </mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div fxFlex.gt-sm="25%">
                                                <mat-form-field appearance="fill" fxFlex="100%"
                                                    [mineduFormFieldValidationState]="form.get('numeroDocumentoIdentidad')">
                                                    <mat-label [mineduFormRequiredLabel]="form.get('numeroDocumentoIdentidad')">
                                                        Número de Documento
                                                    </mat-label>
                                                    <input matInput 
                                                        formControlName="numeroDocumentoIdentidad" 
                                                        placeholder="Número de documento" 
                                                        [maxLength]="form.get('idTipoDocumento').value == 11 ? 8 : 12"
                                                        [readonly]="form.get('idTipoDocumento').value == -1"
                                                        (keypress)="onKeyPressNumeroDocumento($event)"
                                                        (keydown)="onKeyDownNumeroDocumento($event)"
                                                        (keyup)="onKeyUpNumeroDocumento($event)"
                                                        uppercase />
                                                    <button type="button" matSuffix mat-button 
                                                        mat-icon-button (click)="buscarNumeroDocumentoIdentidad()">
                                                        <mat-icon class="s-24">search</mat-icon>
                                                    </button>
                                                    <mat-error>
                                                        <minedu-form-field-validation-messages
                                                            [mineduFormControl]="form.get('numeroDocumentoIdentidad')">
                                                        </minedu-form-field-validation-messages>
                                                    </mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div fxFlex.gt-sm="25%">
                                                <mat-form-field appearance="fill" fxFlex="100%" [mineduFormFieldValidationState]="form.get('codigoPlaza')">
                                                    <mat-label [mineduFormRequiredLabel]="form.get('codigoPlaza')">Código de Plaza</mat-label>
                                                    <input matInput formControlName="codigoPlaza" placeholder="Código de Plaza" uppercase />
                                                    <button type="button" 
                                                        *ngIf="!form.get('codigoPlaza').invalid" matSuffix mat-button
                                                        mat-icon-button (click)="busquedaCodigoPlaza()">
                                                    <mat-icon class="s-24">search</mat-icon>
                                                    </button>
                                                    <mat-error>
                                                        <minedu-form-field-validation-messages [mineduFormControl]="form.get('numeroDocumentoIdentidad')">
                                                        </minedu-form-field-validation-messages>
                                                    </mat-error>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <div fxLayout="row" fxLayout.lt-md="column" fxLayoutGap="12px">
                                            <div fxFlex.gt-sm="25%">
                                                <minedu-datepicker label="Fecha inicio"
                                                    [mineduFormControl]="form.get('fechaInicio')"
                                                    [formControl]="form.get('fechaInicio')" [min]="form.controls['anio'].value"
                                                    [max]="maxDate">
                                                </minedu-datepicker>
                                            </div>
                                            <div fxFlex.gt-sm="25%">
                                                <minedu-datepicker label="Fecha de fin"
                                                    [mineduFormControl]="form.get('fechaFin')" [formControl]="form.get('fechaFin')"
                                                    [min]="form.get('fechaInicio').value" [max]="maxDate">
                                                </minedu-datepicker>
                                            </div>
                                            <div fxFlex.gt-sm="25%">
                                            </div>
                                            <div fxFlex.gt-sm="25%">
                                            </div>
                                        </div>
                                        <mat-accordion>
                                            <mat-expansion-panel  [expanded]="false">
                                                <mat-expansion-panel-header>
                                                    <mat-panel-title>
                                                        <mat-icon>keyboard_arrow_down</mat-icon>
                                                        Búsqueda avanzada
                                                        <mat-icon>keyboard_arrow_down</mat-icon>
                                                    </mat-panel-title>
                                                </mat-expansion-panel-header>

                                                <div fxLayout="row" fxLayout.lt-md="column" fxLayoutGap="12px" [mineduFormFieldValidationState]="form.get('codigoModular')">
                                                    <div fxFlex.gt-sm="25%">
                                                        <mat-form-field appearance="fill" fxFlex="100%">
                                                            <mat-label [mineduFormRequiredLabel]="form.get('codigoModular')">Código Modular</mat-label>
                                                            <input matInput formControlName="codigoModular" placeholder="Código Modular" uppercase />
                                                            <button type="button" matSuffix mat-button mat-icon-button (click)="busquedaCodigoModular()">
                                                                <mat-icon class="s-24">search</mat-icon>
                                                            </button>
                                                            <mat-error>
                                                                <minedu-form-field-validation-messages [mineduFormControl]="form.get('codigoModular')">
                                                                </minedu-form-field-validation-messages>
                                                            </mat-error>
                                                        </mat-form-field>
                                                    </div>
                                                    <div fxFlex.gt-sm="25%">
                                                        <mat-form-field appearance="fill" fxFlex="100%">
                                                            <mat-label [mineduFormRequiredLabel]="form.get('idAreaDesempenioLaboral')">
                                                                Area Desempeño Laboral
                                                            </mat-label>
                                                            <mat-select formControlName="idAreaDesempenioLaboral" (selectionChange)="selectAreaDesempenioLaboral($event)">
                                                                <mat-option *ngFor="let item of comboLists.listDesempenioLaboral" [value]="item.idAreaDesempenioLaboral">
                                                                    {{ item.descripcionAreaDesempenioLaboral }}
                                                                </mat-option>
                                                            </mat-select>
                                                            <button mat-icon-button matSuffix *ngIf="form.get('idAreaDesempenioLaboral').value > 0" (click)="clearFormField($event, 'idAreaDesempenioLaboral')">
                                                                <mat-icon>close</mat-icon>
                                                            </button>
                                                            <mat-error>
                                                                <minedu-form-field-validation-messages [mineduFormControl]="form.get('idAreaDesempenioLaboral')">
                                                                </minedu-form-field-validation-messages>
                                                            </mat-error>
                                                        </mat-form-field>
                                                    </div>
                                                    <div fxFlex.gt-sm="25%">
                                                        <mat-form-field appearance="fill" fxFlex="100%">
                                                            <mat-label [mineduFormRequiredLabel]="form.get('idTipoCargo')">
                                                                Tipo de Cargo
                                                            </mat-label>
                                                            <mat-select formControlName="idTipoCargo" (selectionChange)="selectTipoCargo($event)">
                                                                <mat-option *ngFor="let item of comboLists.listTipoCargos" [value]="item.id_catalogo_item">
                                                                    {{ item.descripcion_catalogo_item }}
                                                                </mat-option>
                                                            </mat-select>
                                                            <button mat-icon-button matSuffix *ngIf="form.get('idTipoCargo').value > 0" (click)="clearFormField($event, 'idTipoCargo')">
                                                                <mat-icon>close</mat-icon>
                                                            </button>
                                                            <mat-error>
                                                                <minedu-form-field-validation-messages [mineduFormControl]="form.get('idTipoCargo')">                                                            
                                                                </minedu-form-field-validation-messages>
                                                            </mat-error>
                                                        </mat-form-field>
                                                    </div>
                                                    <div fxFlex.gt-sm="25%">
                                                        <mat-form-field appearance="fill" fxFlex="100%">
                                                            <mat-label [mineduFormRequiredLabel]="form.get('idCargo')">
                                                                Cargo
                                                            </mat-label>
                                                            <mat-select formControlName="idCargo">
                                                                <mat-option *ngFor="let item of comboLists.listCargos" [value]="item.idCargo">
                                                                    {{ item.descripcionCargo }}
                                                                </mat-option>
                                                            </mat-select>
                                                            <button mat-icon-button matSuffix *ngIf="form.get('idCargo').value > 0" (click)="clearFormField($event, 'idCargo')">
                                                                <mat-icon>close</mat-icon>
                                                            </button>
                                                            <mat-error>
                                                                <minedu-form-field-validation-messages [mineduFormControl]="form.get('idCargo')">
                                                                </minedu-form-field-validation-messages>
                                                            </mat-error>
                                                        </mat-form-field>
                                                    </div>
                                                </div>
                                            </mat-expansion-panel>
                                        </mat-accordion>
                                    </form>
                                </div>
                                <div class="panel-footer">
                                    <div fxLayout="row" fxLayoutAlign="center center">
                                        <div class="p-0" fxLayout="row">
                                            <button type="button" mat-raised-button (click)="handleLimpiar()">
                                                <span class="material-icons">clear</span>Limpiar</button>
                                        </div>
                                        <div class="pl-6 ml-4" fxLayout="row">
                                            <button type="button" mat-raised-button color="primary" (click)="tabDirecto.isActive ? handleGridDirecto() : handleGrid()">
                                                <span class="material-icons">search</span> Buscar</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div fxLayout="row" fxLayout.lt-md="column" fxLayoutAlign="end center" class="mb-1"  fxLayoutGap="5px" >
                        <div fxLayout="row" fxLayout.lt-sm="column"
                        fxLayoutGap="12px" fxLayoutGap.xs="0" *ngIf="tabDirecto.isActive">
                            <div fxLayoutAlign="end start">
                                <button mat-raised-button color="primary" (click)="handleNuevoDirecto()" class="ml-4" >
                                    <span class="material-icons">add_circle</span>
                                    NUEVO 
                                </button>
                            </div>
                        </div>
                        <div fxLayout="row" fxLayout.lt-sm="column"
                        fxLayoutGap="12px" fxLayoutGap.xs="0" *ngIf="tabDirecto.isActive">
                            <div fxLayoutAlign="end start">
                                <button mat-raised-button color="primary" class="ml-4" >
                                    <span class="material-icons">send</span>
                                    GENERAR PLAZA ESPEJO
                                </button>
                            </div>
                        </div>
                        <div fxLayout="row" fxLayout.lt-sm="column"
                        fxLayoutGap="12px" fxLayoutGap.xs="0">
                            <div fxLayoutAlign="end start">
                                <button mat-stroked-button color="primary" (click)="handleExportar()" class="ml-4" [@animate]="{ value: '*', params: { delay: '300ms', scale: '.2' }}">
                                    <span class="material-icons">get_app</span>
                                    EXPORTAR
                                </button>
                            </div>
                        </div>
                    </div>

                    <mat-tab-group (selectedTabChange)="onTabClick($event)">
                        <mat-tab label="Por Solicitud" #tabSolicitud > 
                            <div ngClass.lt-lg="scroll-grid-lt-lg">
                                <table mat-table class="minedu-table" [dataSource]="dataSource" [@animateStagger]="{value:'50'}">
                                    <ng-container matColumnDef="seleccione">
                                        <th mat-header-cell *matHeaderCellDef>
                                            <mat-checkbox (change)="$event ? masterToggle() : null"
                                                [checked]="selection.hasValue() && isAllSelected()"
                                                [indeterminate]="selection.hasValue() && !isAllSelected()" [aria-label]="checkboxLabel()">
                                            </mat-checkbox>
                                        </th>
                                   
                                        <td mat-cell *matCellDef="let row; let i = indice;" > 
                                            <mat-checkbox
                                                [checked]="selection.isSelected(row)" (click)="$event.stopPropagation()"
                                                (change)="$event ? selection.toggle(row) : null" [aria-label]="checkboxLabel(row)">
                                            </mat-checkbox>
                                        </td>
                                    </ng-container>
                                    <ng-container matColumnDef="numeroSolicitud">
                                        <th mat-header-cell *matHeaderCellDef>Régimen Laboral</th>
                                        <td mat-cell *matCellDef="let row;">{{row.descripcionRegimenLaboral}}</td>
                                    </ng-container>
                                    <ng-container matColumnDef="fechaRegistro">
                                        <th mat-header-cell *matHeaderCellDef>Motivo Acción</th>
                                        <td mat-cell *matCellDef="let row">{{row.descripcionMotivoAccion}}</td>
                                    </ng-container>
                                    <ng-container matColumnDef="tipoReporte">
                                        <th mat-header-cell *matHeaderCellDef>Centro Trabajo</th>
                                        <td mat-cell *matCellDef="let row">{{row.institucionEducativa}}</td>
                                    </ng-container>
                                    <ng-container matColumnDef="codigoPlaza">
                                        <th mat-header-cell *matHeaderCellDef>Codigo Plaza</th>
                                        <td mat-cell *matCellDef="let row">{{row.codigoPlaza}}</td>
                                    </ng-container>
                                    <ng-container matColumnDef="numeroDocumentoIdentidad">
                                        <th mat-header-cell *matHeaderCellDef>Documento</th>
                                        <td mat-cell *matCellDef="let row">{{row.numeroDocumentoIdentidad}}</td>
                                    </ng-container>
                                    <ng-container matColumnDef="apellidosNombres">
                                        <th mat-header-cell *matHeaderCellDef>Apellidos y Nombres</th>
                                        <td mat-cell *matCellDef="let row">{{row.primerApellido}} {{row.segundoApellido}} {{row.nombres}} </td>
                                    </ng-container>
                                    <ng-container matColumnDef="fechaReporte">
                                        <th mat-header-cell *matHeaderCellDef>Fecha Inicio</th>
                                        <td mat-cell *matCellDef="let row">{{row.fechaRegistroAtencion | date:'dd/MM/yyyy'}} </td>
                                    </ng-container>
                                    <ng-container matColumnDef="estado">
                                        <th mat-header-cell *matHeaderCellDef>Estado</th>
                                        <td mat-cell *matCellDef="let row">
                                            <span *ngIf="row.estadoAtencion" class="h6 p-4" [ngClass]="{
                                                    'red-500':row.estadoAtencion === 'ELIMINADO',
                                                    'green-600':row.estadoAtencion === 'PENDIENTE',
                                                    'orange-500':row.estadoAtencion === 'EN PROCESO',
                                                    'cyan-600':row.estadoAtencion==='ATENDIDO',
                                                    'grey-900':row.estadoAtencion==='OBSERVADO'}">
                                                {{row.estadoAtencion}}</span>
                                        </td>
                                    </ng-container>
                                    <ng-container matColumnDef="opciones">
                                        <th mat-header-cell *matHeaderCellDef>Acciones</th>
                                        <td mat-cell *matCellDef="let row; let  i = index;">
                                            <div fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="10px" fxLayoutGap.lt-md="4px">
                                                <div class="mat-icon-table" fxLayoutAlign="center center">
                                                    <button mat-stroked-button color="primary" class="sidebar-toggle btn-sm"
                                                        (click)="handleInformacionSolicitud(row)" aria-label="Ver Información" matTooltip="Ver información">
                                                        <mat-icon>info</mat-icon>
                                                    </button>
                                                </div>
                                                <div class="mat-icon-table" fxLayoutAlign="center center">
                                                    <button mat-stroked-button color="primary" class="sidebar-toggle btn-sm" [style.display]="row.estadoAtencion === 'EN PROCESO' ? '' : 'none'"
                                                        (click)="handleModificar(row)" aria-label="Modificar" matTooltip="Modificar">
                                                        <mat-icon>edit</mat-icon>
                                                    </button>
                                                </div>
                                                <div class="mat-icon-table" fxLayoutAlign="center center">
                                                    <button mat-stroked-button color="primary" class="sidebar-toggle btn-sm ml-2" [style.display]="(row.estadoAtencion === 'EN PROCESO' || row.estadoAtencion === 'PENDIENTE') ? '' : 'none'"
                                                        (click)="handleAtender(row, i)" aria-label="Atender" matTooltip="Atender">
                                                        <mat-icon>check</mat-icon>
                                                    </button>
                                                </div>
                                                <div class="mat-icon-table" fxLayoutAlign="center center">
                                                    <button mat-stroked-button color="primary" class="sidebar-toggle btn-sm ml-2" [style.display]="(row.estadoAtencion === 'ATENDIDO' && row.codigoMotivoAccion==305) ? '' : 'none'"
                                                        (click)="handleReincorporar(row, i)" aria-label="Reincorporar" matTooltip="Reincorporar">
                                                        <mat-icon>repeat</mat-icon>
                                                    </button>
                                                </div>
                                            </div>
                                        </td>
                                    </ng-container>
                                    <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky:true"></tr>
                                    <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="selection.toggle(row)"
                                        [ngClass]="{hovered: row.hovered, selected: selection.isSelected(row)}" 
                                        (mouseover)="row.hovered = true" (mouseout)="row.hovered = false" 
                                        [@animate]="{value:'*',params:{y:'100%'}}">
                                    </tr>
                                </table>
                            </div>
                            <div class="no-results" *ngIf="!(dataSource?.loading | async)" 
                                [style.display]="dataSource?.data.length === 0 ? '' : 'none'">
                                No se encontraron registros
                            </div>
                            <div fxLayout="column" fxLayoutAlign="center center" class="spinner-container" *ngIf="dataSource?.loading | async">
                                <mat-spinner diameter="50"></mat-spinner>
                            </div>
                            <mat-paginator #paginator [length]="dataSource?.dataTotal" [pageIndex]="0" [pageSize]="10" fxLayoutAlign="center center"
                                [pageSizeOptions]="[5, 10, 15, 20]"></mat-paginator>
                        </mat-tab>
                        <mat-tab label="Directo" #tabDirecto >
                            <div ngClass.lt-lg="scroll-grid-lt-lg">
                                <table mat-table class="minedu-table" [dataSource]="dsDirecto" [@animateStagger]="{value:'50'}">
                                    <ng-container matColumnDef="seleccione">
                                        <th mat-header-cell *matHeaderCellDef>
                                            <mat-checkbox (change)="$event ? masterToggleDirect() : null"
                                                [checked]="selection.hasValue() && isAllSelectedDirect()"
                                                [indeterminate]="selection.hasValue() && !isAllSelectedDirect()" [aria-label]="checkboxLabelDirect()">
                                            </mat-checkbox>
                                        </th>
                                        <td mat-cell *matCellDef="let row; let i = indice;" > 
                                            <mat-checkbox
                                                [checked]="selection.isSelected(row)" (click)="$event.stopPropagation()"
                                                (change)="$event ? selection.toggle(row) : null" [aria-label]="checkboxLabelDirect(row)">
                                            </mat-checkbox>
                                        </td>
                                    </ng-container>
                                    <ng-container matColumnDef="numeroSolicitud">
                                        <th mat-header-cell *matHeaderCellDef>Régimen Laboral</th>
                                        <td mat-cell *matCellDef="let row;">{{row.descripcionRegimenLaboral}}</td>
                                    </ng-container>
                                    <ng-container matColumnDef="fechaRegistro">
                                        <th mat-header-cell *matHeaderCellDef>Motivo Acción</th>
                                        <td mat-cell *matCellDef="let row">{{row.descripcionMotivoAccion}}</td>
                                    </ng-container>
                                    <ng-container matColumnDef="tipoReporte">
                                        <th mat-header-cell *matHeaderCellDef>Centro Trabajo</th>
                                        <td mat-cell *matCellDef="let row">{{row.institucionEducativa}}</td>
                                    </ng-container>
                                    <ng-container matColumnDef="codigoPlaza">
                                        <th mat-header-cell *matHeaderCellDef>Codigo Plaza</th>
                                        <td mat-cell *matCellDef="let row">{{row.codigoPlaza}}</td>
                                    </ng-container>
                                    <ng-container matColumnDef="numeroDocumentoIdentidad">
                                        <th mat-header-cell *matHeaderCellDef>Documento</th>
                                        <td mat-cell *matCellDef="let row">{{row.numeroDocumentoIdentidad}}</td>
                                    </ng-container>
                                    <ng-container matColumnDef="apellidosNombres">
                                        <th mat-header-cell *matHeaderCellDef>Apellidos y Nombres</th>
                                        <td mat-cell *matCellDef="let row">{{row.primerApellido}} {{row.segundoApellido}} {{row.nombres}} </td>
                                    </ng-container>
                                    <ng-container matColumnDef="fechaReporte">
                                        <th mat-header-cell *matHeaderCellDef>Fecha Inicio</th>
                                        <td mat-cell *matCellDef="let row">{{row.fechaRegistroAtencion | date:'dd/MM/yyyy'}} </td>
                                    </ng-container>
                                    <ng-container matColumnDef="estado">
                                        <th mat-header-cell *matHeaderCellDef>Estado</th>
                                        <td mat-cell *matCellDef="let row">
                                            <span *ngIf="row.estadoAtencion" class="h6 p-4" [ngClass]="{
                                                    'red-500':row.estadoAtencion === 'ELIMINADO',
                                                    'green-600':row.estadoAtencion === 'PENDIENTE',
                                                    'orange-500':row.estadoAtencion === 'EN PROCESO',
                                                    'cyan-600':row.estadoAtencion==='ATENDIDO',
                                                    'grey-900':row.estadoAtencion==='OBSERVADO'}">
                                                {{row.estadoAtencion}}</span>
                                        </td>
                                    </ng-container>
                                    <ng-container matColumnDef="opciones">
                                        <th mat-header-cell *matHeaderCellDef>Acciones</th>
                                        <td mat-cell *matCellDef="let row; let  i = index;">
                                            <div fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="10px" fxLayoutGap.lt-md="4px">
                                                <div class="mat-icon-table" fxLayoutAlign="center center">
                                                    <button mat-stroked-button color="primary" class="sidebar-toggle btn-sm"
                                                        (click)="handleInformacionDirecto(row)" aria-label="Ver Información" matTooltip="Ver información">
                                                        <mat-icon>info</mat-icon>
                                                    </button>
                                                </div>
                                                <div class="mat-icon-table" fxLayoutAlign="center center">
                                                    <button mat-stroked-button color="primary" class="sidebar-toggle btn-sm" [style.display]="row.estadoAtencion === 'EN PROCESO' ? '' : 'none'"
                                                        (click)="handleModificarDirecto(row)" aria-label="Modificar" matTooltip="Modificar">
                                                        <mat-icon>edit</mat-icon>
                                                    </button>
                                                </div>
                                                <div class="mat-icon-table" fxLayoutAlign="center center">
                                                    <button mat-stroked-button color="primary" class="sidebar-toggle btn-sm ml-2" [style.display]="(row.estadoAtencion === 'ATENDIDO' && row.codigoMotivoAccion==305) ? '' : 'none'"
                                                        (click)="handleReincorporarDirecto(row, i)" aria-label="Reincorporar" matTooltip="Reincorporar">
                                                        <mat-icon>repeat</mat-icon>
                                                    </button>
                                                </div>
                                            </div>
                                        </td>
                                    </ng-container>
                                    <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky:true"></tr>
                                    <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="selection.toggle(row)"
                                        [ngClass]="{hovered: row.hovered, selected: selection.isSelected(row)}" 
                                        (mouseover)="row.hovered = true" (mouseout)="row.hovered = false" 
                                        [@animate]="{value:'*',params:{y:'100%'}}">
                                    </tr>
                                </table>
                            </div>
                            <div class="no-results" *ngIf="!(dsDirecto?.loading | async)" 
                                [style.display]="dsDirecto?.data.length === 0 ? '' : 'none'">
                                No se encontraron registros
                            </div>
                            <div fxLayout="column" fxLayoutAlign="center center" class="spinner-container" *ngIf="dsDirecto?.loading | async">
                                <mat-spinner diameter="50"></mat-spinner>
                            </div>
                            <mat-paginator #paginator [length]="dsDirecto?.dataTotal" [pageIndex]="0" [pageSize]="10" fxLayoutAlign="center center"
                                [pageSizeOptions]="[5, 10, 15, 20]"></mat-paginator>
                        </mat-tab>
                    </mat-tab-group>
                </div>
            </div>
        </div>
    </div>
</div>